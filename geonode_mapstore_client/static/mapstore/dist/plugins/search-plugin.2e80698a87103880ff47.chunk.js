(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[5190],{60604:(e,t,r)=>{"use strict";r.d(t,{jJ:()=>n,oy:()=>o,yg:()=>i,vD:()=>a,W:()=>c,B1:()=>s,fU:()=>l,cY:()=>u});var n="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",o="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",i="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",a="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",o=arguments.length>3?arguments[3]:void 0;return{type:n,id:e,owner:t,actionType:r,options:o}},s=function(e,t){return{type:o,owner:e,options:t}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:i,id:t,owner:r}},u=function(){return{type:a}}},21914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>c,Pn:()=>s,DZ:()=>l,e8:()=>u,E0:()=>f,F9:()=>p,X_:()=>d,pb:()=>y,qb:()=>m,Re:()=>h,ih:()=>b,xy:()=>v,jL:()=>g,oz:()=>O,ph:()=>S,lF:()=>E,gG:()=>_,cb:()=>w,GI:()=>P,B1:()=>j,fv:()=>I,gc:()=>C,zX:()=>T,ZF:()=>R,Zb:()=>k,Fm:()=>x,sV:()=>D,Mn:()=>A,LU:()=>N,XP:()=>F,WU:()=>M,JB:()=>V,g:()=>G,ws:()=>L,HP:()=>Z,aN:()=>B,Pg:()=>U,u0:()=>K,TM:()=>H,PM:()=>Y,lK:()=>z,sv:()=>W,MO:()=>X,oO:()=>$,Mc:()=>Q,Zw:()=>J,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>ne,Y$:()=>oe});var n=r(47310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",c="CHANGE_MAPINFO_STATE",s="NEW_MAPINFO_REQUEST",l="PURGE_MAPINFO_RESULTS",u="CHANGE_MAPINFO_FORMAT",f="SHOW_MAPINFO_MARKER",p="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",m="GET_VECTOR_INFO",h="NO_QUERYABLE_LAYERS",b="CLEAR_WARNING",v="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",O="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",S="TOGGLE_MAPINFO_STATE",E="UPDATE_CENTER_TO_MARKER",_="IDENTIFY:CHANGE_PAGE",w="IDENTIFY:CLOSE_IDENTIFY",P="IDENTIFY:CHANGE_FORMAT",j="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",I="IDENTIFY:EDIT_LAYER_FEATURES",C="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",T="IDENTIFY:SET_MAP_TRIGGER",R="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",k="IDENTIFY:SET_SHOW_IN_MAP_POPUP";function x(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function D(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function A(e,t,r,n){return{type:a,reqId:e,exceptions:t,requestParams:r,layerMetadata:n}}function N(){return{type:h}}function F(){return{type:b}}function M(e,t){return{type:s,reqId:e,request:t}}function V(e,t,r,n){return{type:m,layer:e,request:t,metadata:r,queryableLayers:n}}function G(){return{type:l}}function L(e){return{type:u,infoFormat:e}}function Z(){return{type:f}}function B(){return{type:p}}function q(e){return{type:d,reverseGeocodeData:e.data}}function U(e){return function(t){n.Z.reverseGeocode(e).then((function(e){t(q(e))})).catch((function(e){t(q(e))}))}}function K(){return{type:y}}function H(){return{type:S}}function Y(e){return{type:E,status:e}}function z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:v,point:e,layer:t,filterNameList:r,overrideParams:n,itemId:o}}function W(e){return{type:g,point:e}}function X(e){return{type:O,enabled:e}}function $(e){return{type:_,index:e}}var Q=function(){return{type:w}},J=function(e){return{type:P,format:e}},ee=function(e){return{type:j,showCoordinateEditor:e}},te=function(e){return{type:I,layer:e}},re=function(e){return{type:C,query:e}},ne=function(e){return{type:T,trigger:e}},oe=function(e){return{type:k,value:e}}},47310:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(75875),o=r.n(n),i=r(72500),a=r.n(i),c=r(27418),s=r.n(c),l={format:"json",bounded:0,polygon_geojson:1,priority:5};const u={geocode:function(e,t){var r=s()({q:e},l,t||{}),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o().get(n)},reverseGeocode:function(e,t){var r=s()({lat:e.lat,lon:e.lng},t||{},l),n=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o().get(n)}}},15047:(e,t,r)=>{"use strict";r.d(t,{b:()=>m});var n=r(27418),o=r.n(n);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return null===e?[]:e.map((function(e){return{properties:a({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}))},l=r(59286),u=r(32420),f=["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"];var p=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,c=e.predicate,s=(0,l.generateTemplateString)(n||"")(i),u=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===u.length&&(u=r?[r]:[]),u.length>0&&(t="(".concat(u.map((function(e){return a.map((function(t){return"".concat(t," ").concat(c," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(s):s||null},d={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(47310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:s(e.data)}))},wfs:function(e,t){var r=t.url,n=t.typeName,i=t.queriableAttributes,a=void 0===i?[]:i,c=t.outputFormat,s=void 0===c?"application/json":c,l=t.predicate,d=void 0===l?"ILIKE":l,y=t.staticFilter,m=void 0===y?"":y,h=t.blacklist,b=void 0===h?[]:h,v=t.item,g=t.fromTextToFilter,O=void 0===g?p:g,S=t.returnFullData,E=void 0!==S&&S,_=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,f),w=O({searchText:e,staticFilter:m,blacklist:b,item:v,queriableAttributes:a,predicate:d});return u.DH(r,o()({maxFeatures:10,typeName:n,outputFormat:s,cql_filter:w},_)).then((function(e){return E?e:e.features}))}},y={setService:function(e,t){d[e]=t},getService:function(e){return d[e]?d[e]:null}},m={Services:d,Utils:y}},15402:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(45697),o=r.n(n),i=r(24852),a=r.n(i);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=r(68195).FormattedHTMLMessage,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(n);if(o){var r=p(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function c(){return s(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){return this.context.intl?a().createElement(y,{id:this.props.msgId,values:this.props.msgParams}):a().createElement("span",null,this.props.msgId||"")}}])&&l(t.prototype,r),c}(a().Component);d(m,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),d(m,"contextTypes",{intl:o().object});const h=m},38167:(e,t,r)=>{"use strict";r.d(t,{k9:()=>S,v0:()=>O,ZP:()=>_});var n=r(45697),o=r.n(n),i=r(24852),a=r.n(i),c=r(68195);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(o){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){return u(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){return this.context.intl?a().createElement(c.FormattedDate,l({value:this.props.value},this.props.dateParams)):a().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&f(t.prototype,r),s}(a().Component);m(h,"propTypes",{value:o().object,dateParams:o().object}),m(h,"contextTypes",{intl:o().object}),m(h,"defaultProps",{value:new Date});const b=h;var v=r(15402),g=r(5346),O=g.Z,S=v.Z,E=b;const _={Message:g.Z,HTML:S,DateFormat:E}},99509:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Q});var n=r(24852),o=r.n(n),i=r(45697),a=r.n(i),c=r(48403),s=r.n(c),l=r(57588),u=r(94192);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(i){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function c(){var e;p(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(h(e=a.call.apply(a,[this].concat(r))),"verifyOnKeyDownEvent",(function(t){69===t.keyCode&&t.preventDefault(),13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.props.onKeyDown(t))})),v(h(e),"validateDecimalLon",(function(t){var r=e.props.constraints[e.props.format].lon.min,n=e.props.constraints[e.props.format].lon.max,o=parseFloat(t);return isNaN(o)||o<r||o>n?"error":null})),v(h(e),"validateDecimalLat",(function(t){var r=e.props.constraints[e.props.format].lat.min,n=e.props.constraints[e.props.format].lat.max,o=parseFloat(t);return isNaN(o)||o<r||o>n?"error":null})),e}return t=c,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.coordinate,n=t.value,i=t.onChange,a=t.disabled,c="validateDecimal"+s()(r);return o().createElement(l.FormGroup,{validationState:this[c](n)},o().createElement(u.Z,{disabled:a,key:r,value:n,placeholder:r,onChange:function(t){""===t?i(""):null===e[c](t)?i(t):i(n)},onKeyDown:this.verifyOnKeyDownEvent,step:1,validateNameFunc:this[c],type:"number"}))}}])&&d(t.prototype,r),c}(o().Component);v(g,"propTypes",{idx:a().number,value:a().number,constraints:a().object,format:a().string,coordinate:a().string,onChange:a().func,onKeyDown:a().func,onSubmit:a().func,disabled:a().bool}),v(g,"defaultProps",{format:"decimal",coordinate:"lat",constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}},onKeyDown:function(){},disabled:!1});const O=g;var S=r(14293),E=r.n(S),_=r(67076);const w=(0,_.withProps)((function(e){var t=e.coordinate,r=void 0===t?"lat":t;return{maxDegrees:"lat"===r?90:180,directions:"lat"===r?["N","S"]:["E","W"]}}));var P=r(62395);const j=(0,_.compose)((0,_.withProps)((function(e){return{isValid:""!==e.value}})),(0,_.withState)("initial","setInitial",{}),(0,_.withProps)((function(e){var t=e.isValid,r=e.initial,n=e.degrees,o=e.minutes,i=e.seconds;return t||""===n&&""===o&&""===i?{}:r})),(0,_.withHandlers)({onChange:function(e){return function(t){var r=t.degrees,n=t.minutes,o=t.seconds,i=t.direction;isNaN(r)?e.setInitial({degrees:"",minutes:n,seconds:o,direction:i}):isNaN(n)?e.setInitial({degrees:r,minutes:"",seconds:o,direction:i}):isNaN(o)&&e.setInitial({degrees:r,minutes:n,seconds:"",direction:i}),e.onChange({degrees:r,minutes:n,seconds:o,direction:i})}}}));function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M="degrees",V="seconds",G="minutes",L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(n);if(i){var r=N(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return D(this,e)});function c(){var e;R(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return F(A(e=a.call.apply(a,[this].concat(r))),"onChange",(function(t,r){var n=e.getUpdatedCoordinateValue(t,r);e.props.onChange(n)})),F(A(e),"getUpdatedCoordinateValue",(function(t,r){try{var n=F({degrees:e.props.degrees,minutes:e.props.minutes,seconds:e.props.seconds,direction:e.props.direction},t,t===M?Math.min(r,e.props.maxDegrees):r),o=n.seconds,i=n.minutes+e.getSexagesimalStep(o),a=Math.min(e.props.maxDegrees,n.degrees+e.getSexagesimalStep(i)),c=n.direction;return o=e.roundToNextSexagesimalStep(o),i=e.roundToNextSexagesimalStep(i),a===e.props.maxDegrees&&(i=0,o=0),c=a<0?c===e.props.directions[0]?e.props.directions[1]:e.props.directions[0]:c,-1===a&&(n.degrees<0&&n.minutes>=0?a=n.degrees:n.minutes<0&&n.degrees<=0?(a=0,i=n.minutes):(a=0,i=0,o=1e-4)),{degrees:a,minutes:i,seconds:o,direction:c}}catch(e){return null}})),F(A(e),"getSexagesimalStep",(function(e){return e>=60?1:e<0?-1:0})),F(A(e),"getInputStyle",(function(e){return isNaN(e)||""===e?{borderColor:"#a94442"}:{}})),F(A(e),"getNewValue",(function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;if(""===t)r="";else{var o=n===V?parseFloat(t):parseInt(t,10),i=n===M?e.props.maxDegrees:60;r=Math.round(10*o)/10<i?o:e.props[n]}return r})),F(A(e),"verifyOnKeyDownEvent",(function(t){var r;69===t.keyCode&&t.preventDefault(),"0"===(null==t||null===(r=t.target)||void 0===r?void 0:r.value)&&t.target.setSelectionRange(-1,-1),13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),e.props.onKeyDown())})),F(A(e),"roundToNextSexagesimalStep",(function(e){return e<0?60+e:e>=60?e-60:e})),F(A(e),"isValid",(function(t){var r=t.minutes,n=t.seconds,o=t.degrees,i=t.direction;return!E()(r)&&r>0&&r<60&&!E()(n)&&n>0&&n<60&&!E()(o)&&o>0&&o<e.props.maxDegrees&&i})),e}return t=c,(r=[{key:"render",value:function(){var e=this,t={padding:0,textAlign:"center",borderRight:"none"},r=this.getInputStyle(this.props.degrees),n=this.getInputStyle(this.props.minutes),i=this.getInputStyle(this.props.seconds),a={position:"relative",top:0,overflow:"visible",zIndex:3,left:-25,width:0,height:0},c=this.props.aeronauticalOptions.seconds.step;return o().createElement(l.FormGroup,{style:{display:"inline-flex"}},o().createElement("div",{className:M,style:{width:40,display:"flex"}},o().createElement(u.Z,{key:this.props.coordinate+M,value:this.props.degrees,disabled:this.props.disabled,placeholder:"d",onChange:function(t){return e.onChange(M,e.getNewValue(t))},step:1,size:3,max:this.props.maxDegrees,min:-1,onKeyDown:function(t){e.verifyOnKeyDownEvent(t)},style:T(T({width:"100%"},t),r),type:"number"}),o().createElement("span",{style:a},"°")),o().createElement("div",{className:G,style:{width:40,display:"flex"}},o().createElement(u.Z,{disabled:this.props.disabled,key:this.props.coordinate+G,placeholder:"m",size:3,value:this.props.minutes,onChange:function(t){return e.onChange(G,e.getNewValue(t,G))},max:60,min:-1,onKeyDown:function(t){e.verifyOnKeyDownEvent(t)},style:T(T({width:"100%"},t),n),step:1,type:"number"}),o().createElement("span",{style:a},"′")),o().createElement("div",{className:V,style:{display:"flex"}},o().createElement(u.Z,{disabled:this.props.disabled,key:this.props.coordinate+V,value:this.props.seconds,placeholder:"s",onChange:function(t){return e.onChange(V,e.getNewValue(t,V))},step:c,max:60,onKeyDown:function(t){e.verifyOnKeyDownEvent(t)},min:-1,style:T(T({width:"100%"},t),i),type:"number"}),o().createElement("span",{style:a},"″")),o().createElement("div",{className:"direction-select"},o().createElement(l.FormControl,{disabled:this.props.disabled,componentClass:"select",placeholder:"select",value:this.props.direction,onChange:function(t){return e.onChange("direction",t.target.value)},style:{paddingLeft:4,paddingRight:4,flex:"1 1 0%"}},this.props.directions.map((function(e){return o().createElement("option",{key:e,value:e},e)})))))}}])&&k(t.prototype,r),c}(o().Component);F(L,"propTypes",{idx:a().number,maxDegrees:a().number,degrees:a().number,minutes:a().number,seconds:a().number,directions:a().array,direction:a().string,aeronauticalOptions:a().object,coordinate:a().string,onChange:a().func,onKeyDown:a().func,disabled:a().bool}),F(L,"defaultProps",{coordinate:"lat",maxDegrees:90,directions:["N","S"],aeronauticalOptions:{seconds:{decimals:4,step:1e-4}},onKeyDown:function(){},disabled:!1});const Z=(0,_.compose)(w,P.Z,j)(L),B=(0,_.compose)((0,_.withHandlers)({onChange:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.maxLatitude,o=void 0===n?89.9997222222:n,i=e.coordinate;return function(e){return r(Math.abs(parseFloat(e))>o&&"lat"===i?Math.sign(e)*o:e)}}}));function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(n);if(i){var r=W(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return z(this,e)});function c(){return K(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props.format;return"decimal"===e||E()(e)?o().createElement(O,U({},this.props,{format:this.props.format||"decimal"})):o().createElement(Z,this.props)}}])&&H(t.prototype,r),c}(o().Component);X($,"propTypes",{idx:a().number,value:a().number,constraints:a().object,format:a().string,aeronauticalOptions:a().object,coordinate:a().string,onChange:a().func,onKeyDown:a().func}),X($,"defaultProps",{format:"decimal",constraints:{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}});const Q=B($)},62395:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(7654),o=r.n(n),i=r(59854),a=r.n(i),c=r(67076);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=(0,c.compose)((0,c.withProps)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{seconds:{decimals:4}}).seconds,n=e>=0?Math.floor(e):Math.ceil(e),i=Math.abs(60*(e-n)),c=Math.floor(i),s=60*(i-c),l=a()(s,r.decimals);return n=Math.abs(n),60===l&&(c++,l=0),60===c&&(n++,c=0),o()(n)||""===e?{degrees:"",minutes:"",seconds:"",direction:t?"E":"N"}:{degrees:n,minutes:c,seconds:l,direction:e<0?t?"W":"S":t?"E":"N"}}(e.value,"lon"===e.coordinate,e.aeronauticalOptions))})),(0,c.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.degrees,n=t.minutes,i=t.seconds,a=t.direction,c=0,s=0,l=0;void 0===r&&void 0===n&&void 0===i&&e.onChange(void 0),o()(r)||(c=r),o()(n)||(s=n),o()(i)||(l=i);var u=c+s/60+l/3600;(u>0&&("S"===a||"W"===a)||u<0&&("N"===a||"E"===a))&&(u*=-1),e.onChange(u.toPrecision(12))}}}))},77900:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(57588),o=r(15135),i=r(24852),a=r.n(i),c=r(23570),s=r.n(c);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=(0,o.Z)(n.DropdownButton),f={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:s()()};const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuOptions,r=void 0===t?[]:t,o=e.buttonConfig,i=void 0===o?{}:o;return a().createElement(u,l({},f,i),r.length?r.map((function(e,t){var r=e.glyph,o=e.text,i=e.onClick,c=e.active,s=void 0!==c&&c;return a().createElement(n.MenuItem,{active:s,eventKey:t,onClick:i,key:t},r&&a().createElement(n.Glyphicon,{glyph:r})," ",o)})):null)}},61012:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Xt});var n=r(27361),o=r.n(n),i=r(1469),a=r.n(i),c=r(27418),s=r.n(c),l=r(45697),u=r.n(l),f=r(24852),p=r.n(f),d=r(71703),y=r(1852),m=r.n(y),h=r(22222),b=r(60604),v=r(81808),g=r(82904),O=r(1550),S=r(97222);function E(e,t){return{type:"SET_SEARCH_BOOKMARK_CONFIG",property:e,value:t}}var _=r(57588),w=r(41609),P=r.n(w),j=r(52353),I=r.n(j),C=r(5346),T=r(15135),R=r(23570),k=r.n(R);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var D=(0,T.Z)(_.DropdownButton),A={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:k()()},N={title:p().createElement(_.Glyphicon,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0};const F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuItems,r=void 0===t?[]:t,n=e.disabled,o=void 0!==n&&n;return p().createElement(D,x({disabled:o},A,N),r.length?r.map((function(e){return e})):null)},M=function(e){var t=e.className,r=e.style,n=e.children;return p().createElement("div",{id:"map-search-bar",style:r,className:"MapSearchBar"+(t?" "+t:"")},n)};var V=r(86638);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Z=function(e,t){var r=e.show,n=e.autoFocusOnSelect,o=void 0===n||n,i=e.selectedItems,a=void 0===i?[]:i,c=e.className,s=e.style,l=void 0===s?{textOverflow:"ellipsis"}:s,u=e.placeholder,f=e.placeholderMsgId,d=e.hideOnBlur,y=void 0===d||d,m=e.searchText,h=void 0===m?"":m,b=e.typeAhead,v=void 0===b||b,g=e.delay,O=void 0===g?1e3:g,S=e.blurResetDelay,E=void 0===S?300:S,w=e.onSearch,P=void 0===w?function(){}:w,j=e.onSearchTextChange,I=void 0===j?function(){}:j,C=e.onCancelSelectedItem,T=void 0===C?function(){}:C,R=e.onPurgeResults,k=void 0===R?function(){}:R,x=p().useRef(),D=p().useRef(),A=G(p().useState(),2),N=A[0],F=A[1],M=G(p().useState(),2),L=M[0],Z=M[1],B=G(p().useState(!1),2),q=B[0],U=B[1];p().useEffect((function(){var e=D.current;if(o&&a&&(e<a.length||!e&&1===a.length)){var t=x.current;t&&t.focus instanceof Function&&setTimeout((function(){return t.focus()}),200)}D.current=a&&a.length})),p().useEffect((function(){q&&(P(),U(!1))}),[q,P]);var K="search.addressSearch";if(!u&&t.messages){var H=(0,V.S$)(t.messages,f||K);H&&(K=H)}else K=u;return r&&p().createElement(_.FormControl,{className:"searchInput".concat(c?" ".concat(c):""),key:"search-input",placeholder:K,type:"text",inputRef:function(e){x.current=e},style:l,value:h,onKeyDown:function(e){switch(e.keyCode){case 13:P();break;case 8:!h&&a&&a.length>0&&T(a[a.length-1])}},onBlur:function(){y&&(N&&clearTimeout(N),F(setTimeout((function(){k()}),E)))},onFocus:function(){v&&h&&P()},onChange:function(e){var t=e.target.value;I(t),v&&(L&&clearTimeout(L),Z(setTimeout((function(){U(!0)}),O)))}})};Z.contextTypes={messages:u().object};const B=Z;var q=r(72986),U=r.n(q),K=r(80717);function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const X=function(e){var t=e.loading,r=(e.splitTools,e.toolbarProps),n=void 0===r?{}:r,o=e.toolbarButtons,i=void 0===o?[]:o,a=e.children;return p().createElement("span",{className:"search-toolbar-options"},t&&p().createElement(U(),{style:s()({},{position:"absolute"},z({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),p().createElement(K.Z,H({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},n,{buttons:i})),a)};var $=r(43129);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oe=(0,r(93451).Z)(["placeholder","clearValueText","noResultsText"])($.ZP),ie={searchByBookmark:function(e,t,r,n,o){var i,a,c=e.options,s=void 0===c?{}:c,l=e.layerVisibilityReload;void 0!==l&&l?t(re(re({},r),{},{map:re(re({},r.map),{},{bookmark_search_config:n})}),null,{bounds:[s.west,s.south,s.east,s.north],crs:(null==r||null===(i=r.map)||void 0===i||null===(a=i.center)||void 0===a?void 0:a.crs)||"EPSG:4326"}):s&&!P()(s)&&o([s.west,s.south,s.east,s.north],"EPSG:4326")},searchIcon:function(e,t){var r=t.onLayerVisibilityLoad,n=t.mapInitial,o=t.bookmarkConfig,i=t.onZoomToExtent;return{tooltipId:"bookmarkSearch"===e?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"bookmarkSearch"===e&&!(null!=o&&o.zoomOnSelect),disabled:"bookmarkSearch"===e&&!o.selected,onClick:function(){"bookmarkSearch"===e&&ie.searchByBookmark(o.selected,r,n,o.bookmarkSearchConfig||{},i)}}}},ae=function(e){var t=e.bookmarkConfig,r=e.onPropertyChange,n=e.onLayerVisibilityLoad,o=e.mapInitial,i=e.onZoomToExtent,a=J((0,f.useState)([]),2),c=a[0],s=a[1],l=t||{},u=l.selected,d=void 0===u?{}:u,y=l.bookmarkSearchConfig,m=void 0===y?{}:y,h=l.zoomOnSelect,b=void 0===h||h,v=m.bookmarks,g=void 0===v?[]:v,O=ie.searchByBookmark;return(0,f.useEffect)((function(){P()(g)||s(g.map((function(e){return e.title})))}),[g]),p().createElement("div",{className:"search-select"},p().createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},p().createElement(oe,Q({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",a=J(g.filter((function(r,n){return r.title===t&&n===e.idx})),1)[0];r("selected",a),b&&O(a,n,o,m,i)},value:(null==d?void 0:d.title)||"",options:c.map((function(e,t){return{label:e,value:e,idx:t}})),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};ae.propTypes={bookmarkConfig:u().object.isRequired,onPropertyChange:u().func.isRequired};const ce=(0,d.connect)((function(e){return{bookmarkConfig:e.searchbookmarkconfig||{}}}),{onPropertyChange:E,onZoomToExtent:O.Px,onLayerVisibilityLoad:v.H0})(ae);var se=r(81763),le=r.n(se),ue=r(99509),fe=r(77900),pe={clearCoordinates:function(e,t){e({owner:"search"}),t("lat",""),t("lon","")},areValidCoordinates:function(e){return le()(null==e?void 0:e.lon)&&le()(null==e?void 0:e.lat)},zoomToPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;e({x:parseFloat(t.lon),y:parseFloat(t.lat)},r,"EPSG:4326")},coordinateFormatChange:function(e,t,r,n){return{buttonConfig:{title:p().createElement(_.Glyphicon,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===e,onClick:function(){return t("decimal")},text:p().createElement(C.Z,{msgId:"search.decimal"})},{active:"aeronautical"===e,onClick:function(){return t("aeronautical")},text:p().createElement(C.Z,{msgId:"search.aeronautical"})}],visible:r&&"coordinatesSearch"===n,Element:fe.Z}},removeIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e&&(le()(t.lon)||le()(t.lat)),onClick:function(){return pe.clearCoordinates(r,n)}}},searchIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e,onClick:function(){"coordinatesSearch"===e&&pe.areValidCoordinates(t)&&pe.zoomToPoint(r,t,n)}}},coordinatesMenuItem:function(e){var t=e.activeTool,r=e.searchText,n=e.clearSearch,o=e.onChangeActiveSearchTool,i=e.onClearBookmarkSearch;return p().createElement(_.MenuItem,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},p().createElement(_.Glyphicon,{glyph:"search-coords"})," ",p().createElement(C.Z,{msgId:"search.coordinatesSearch"}))}},de=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,i=e.onZoomToPoint,a=e.onChangeCoord,c=e.defaultZoomLevel,s=e.aeronauticalOptions,l=void 0===s?{seconds:{decimals:4,step:1e-4}}:s,u=e.constraintsCoordEditor,f=void 0===u?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:u,d=pe.zoomToPoint,y=pe.areValidCoordinates,m=function(e,t){a(e,parseFloat(t)),y()||o({owner:"search"})},h=function(){d(i,r,c)};return p().createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===n?"nowrap":"wrap"}},p().createElement(_.Row,{className:"entryRow ".concat(n)},p().createElement(_.FormGroup,null,p().createElement(_.InputGroup,null,p().createElement(_.InputGroup.Addon,{style:{minWidth:45}},p().createElement(C.Z,{msgId:"search.latitude"})),p().createElement(ue.Z,{format:n,aeronauticalOptions:l,coordinate:"lat",idx:1,value:r.lat,constraints:f,onChange:function(e){return m("lat",e)},onKeyDown:function(){y(r)&&h()}})))),p().createElement(_.Row,{className:"entryRow ".concat(n)},p().createElement(_.FormGroup,null,p().createElement(_.InputGroup,null,p().createElement(_.InputGroup.Addon,{style:{minWidth:45}},p().createElement(C.Z,{msgId:"search.longitude"})),p().createElement(ue.Z,{format:n,aeronauticalOptions:l,coordinate:"lon",idx:2,value:r.lon,constraints:f,onChange:function(e){return m("lon",e)},onKeyDown:function(){y(r)&&h()}})))))};de.propTypes={coordinate:u().object,format:u().string,onClearCoordinatesSearch:u().func,onZoomToPoint:u().func,onChangeCoord:u().func,defaultZoomLevel:u().number};const ye=(0,d.connect)((function(e){return{coordinate:e.search.coordinate||{}}}),{onZoomToPoint:S.Z,onChangeCoord:S.TS})(de);var me=["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onClearBookmarkSearch","onPurgeResults","items"];function he(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){Oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Se=r(13311),Ee=r.n(Se),_e=r(59286);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Te(e)}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Re(n);if(i){var r=Re(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ce(this,e)});function c(){var e;Pe(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ke(Te(e=a.call.apply(a,[this].concat(r))),"onClick",(function(){var t=e.props.item;e.props.onItemClick(t)})),e}return t=c,(r=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return p().createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},p().createElement("div",{className:"search-result-left-container"},p().createElement("div",{className:"icon"}," ",p().createElement("img",{src:e.icon})),p().createElement("div",{className:"text-result-title"},o()(e,this.props.displayName)||(0,_e.generateTemplateString)(this.props.displayName||"")(e)),p().createElement("small",{className:"text-info"},this.props.subTitle&&o()(e,this.props.subTitle)||(0,_e.generateTemplateString)(this.props.subTitle||"")(e))),p().createElement("div",{className:"search-result-right-container"},p().createElement("div",{className:"search-result-tools"},p().createElement(K.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&je(t.prototype,r),c}(p().Component);ke(xe,"propTypes",{subTitle:u().string,item:u().object,displayName:u().string,idField:u().string,icon:u().string,onItemClick:u().func,tools:u().array}),ke(xe,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]});const De=xe;var Ae=r(38167),Ne=r(18412);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e,t){if(t&&("object"===Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ze(e)}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Be(n);if(o){var r=Be(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Le(this,e)});function a(){var e;Me(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return qe(Ze(e=i.call.apply(i,[this].concat(r))),"onItemClick",(function(t){e.props.onItemClick(t,e.props.mapConfig)})),qe(Ze(e),"renderResults",(function(){return e.props.results.map((function(t,r){var n,o=e.findService(t)||{},i=Ee()(e.props.layers,{name:null===(n=o.options)||void 0===n?void 0:n.typeName}),a=(0,Ne.zA)(o),c=!(0,Ne.Tv)(i,o);return p().createElement(De,{subTitle:o.subTitle,idField:o.idField,displayName:o.displayName,key:t.osm_id||t.id||"res_"+r,item:t,onItemClick:e.onItemClick,tools:[{id:"open-gfi",keyProp:"open-gfi",visible:a,disabled:c,glyph:"info-sign",tooltipId:a&&c?"search.layerMustBeVisible":"search.showGFI",onClick:function(r){r.stopPropagation(),e.props.showGFI(t)}}]})}))})),qe(Ze(e),"findService",(function(t){var r=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(r&&"string"==typeof t.__SERVICE__){for(var n=0;n<r.length;n++)if(r[n]&&r[n].id===t.__SERVICE__)return r[n];for(var o=0;o<r.length;o++)if(r[o]&&r[o].type===t.__SERVICE__)return r[o]}else if("object"===Fe(t.__SERVICE__))return t.__SERVICE__;return null})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=p().createElement(Ae.ZP.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,o=r.height-this.props.sizeAdjustment.height;t=s()({},this.props.containerStyle,{maxWidth:n,maxHeight:o})}return this.props.results?0===this.props.results.length?p().createElement("div",{className:"search-result-list",style:s()({padding:"10px",textAlign:"center"},t)},e):p().createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&Ve(t.prototype,r),a}(p().Component);qe(Ue,"propTypes",{results:u().array,layers:u().array,searchOptions:u().object,mapConfig:u().object,fitToMapSize:u().bool,containerStyle:u().object,sizeAdjustment:u().object,onItemClick:u().func,addMarker:u().func,afterItemClick:u().func,showGFI:u().func,notFoundMessage:u().oneOfType([u().object,u().string])}),qe(Ue,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}});var Ke=r(49977),He=r(94707),Ye=r.n(He),ze=r(35385),We=r.n(ze),Xe=r(89734),$e=r.n(Xe),Qe=r(14293),Je=r.n(Qe),et=r(75110),tt=r(21914),rt=r(80416),nt=r(86267),ot=r(15047),it=r(32420),at=r(7412),ct=r(7877);function st(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dt=function(e,t){return(0,at.mx)(e,ft({},(0,ct.oq)(t)))},yt=r(26125);function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vt(e){return function(e){if(Array.isArray(e))return gt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ot=r(827),St=r(63202),Et=r(82467);function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e,t){if(t&&("object"===_t(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ct(n);if(o){var r=Ct(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return It(this,e)});function a(){return wt(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return p().createElement(Et.Z,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button"},p().createElement(_.Glyphicon,{glyph:"search"}))}}])&&Pt(t.prototype,r),a}(p().Component);Tt(Rt,"propTypes",{pressed:u().bool,onToggle:u().func}),Tt(Rt,"defaultProps",{pressed:!1,onToggle:function(){}});const kt=(0,d.connect)((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:g.Xi.bind(null,"search",null)})(Rt);function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Dt,At;function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){Ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zt(e,t){if(t&&("object"===xt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bt(e)}function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(e){return(qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kt=(0,h.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,n){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:o()(e,"activeSearchTool","addressSearch"),format:o()(e,"format")||St.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:n||{}}})),Ht=(0,d.connect)(Kt,{onSearch:S.tt,onChangeCoord:S.TS,onChangeActiveSearchTool:S.a,onClearCoordinatesSearch:b.fU,onClearBookmarkSearch:E,onChangeFormat:S.Zw,onToggleControl:g.Xi,onZoomToPoint:S.Z,onPurgeResults:S.kV,onSearchReset:S.v2,onSearchTextChange:S.k9,onCancelSelectedItem:S.KG,onZoomToExtent:O.Px,onLayerVisibilityLoad:v.H0})((function(e){var t,r=e.activeSearchTool,n=void 0===r?"addressSearch":r,o=e.removeIcon,i=void 0===o?"1-close":o,a=e.searchIcon,c=void 0===a?"search":a,s=e.isSearchClickable,l=void 0===s||s,u=e.splitTools,f=e.searchText,d=void 0===f?"":f,y=e.maxResults,m=void 0===y?15:y,h=e.searchOptions,b=e.loading,v=e.delay,g=e.blurResetDelay,O=e.typeAhead,S=e.coordinate,E=void 0===S?{}:S,w=e.selectedItems,j=void 0===w?[]:w,T=e.defaultZoomLevel,R=void 0===T?12:T,k=e.enabledSearchBookmarkConfig,x=void 0!==k&&k,D=e.error,A=e.format,N=void 0===A?"decimal":A,V=e.placeholder,G=e.placeholderMsgId,L=void 0===G?"search.addressSearch":G,Z=e.showOptions,q=void 0===Z||Z,U=e.showAddressSearchOption,K=void 0===U||U,H=e.showCoordinatesSearchOption,Y=void 0===H||H,z=e.showBookMarkSearchOption,W=void 0===z||z,$=e.onSearch,Q=e.onSearchReset,J=e.onSearchTextChange,ee=e.onCancelSelectedItem,te=e.onChangeCoord,re=void 0===te?function(){}:te,ne=e.onChangeActiveSearchTool,oe=void 0===ne?function(){}:ne,ae=e.onClearCoordinatesSearch,se=void 0===ae?function(){}:ae,le=e.onChangeFormat,ue=void 0===le?function(){}:le,fe=e.onToggleControl,de=void 0===fe?function(){}:fe,be=e.onZoomToPoint,ve=void 0===be?function(){}:be,Oe=e.onClearBookmarkSearch,Se=void 0===Oe?function(){}:Oe,Ee=e.onPurgeResults,_e=e.items,we=void 0===_e?[]:_e,Pe=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,me),je=function(e){var t=e.searchText,r=e.selectedItems,n=e.searchOptions,o=e.maxResults,i=e.onSearch,a=void 0===i?function(){}:i,c=e.onSearchReset,s=void 0===c?function(){}:c;return function(){var e=t,i=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){var n;return t+((null==r||null===(n=r.options)||void 0===n?void 0:n.maxFeatures)||e)}),0)||e}(null==n?void 0:n.services,o);void 0!==e&&""!==e||r&&0!==r.length?void 0!==e&&""!==e&&a(e,n,i):s()}}({searchText:d,selectedItems:j,searchOptions:h,maxResults:m,onSearch:$,onSearchReset:Q}),Ie=function(){Q()},Ce=[];if(K&&Ce.push(p().createElement(_.MenuItem,{active:"addressSearch"===n,onClick:function(){se({owner:"search"}),Se("selected"),oe("addressSearch")}},p().createElement(_.Glyphicon,{glyph:c})," ",p().createElement(C.Z,{msgId:"search.addressSearch"}))),Y&&Ce.push(p().createElement(pe.coordinatesMenuItem,{activeTool:n,searchText:d,clearSearch:Ie,onChangeActiveSearchTool:oe,onClearBookmarkSearch:Se})),W&&!P()(we)){var Te,Re=Pe.bookmarkConfig||{},ke=Re.allowUser,xe=Re.bookmarkSearchConfig,De=we.find((function(e){return"SearchByBookmark"===e.name}))||{};if(De.menuItem){var Ae=De.menuItem;Ce.push(p().createElement(Ae,null))}De.bookmarkConfig&&(t=ge(ge({},De.bookmarkConfig(de,x,n)),!ke&&{visible:!1})),ke||0!==(null==xe||null===(Te=xe.bookmarks)||void 0===Te?void 0:Te.length)||"bookmarkSearch"!==n||oe("addressSearch")}var Ne,Fe=function(){if(q){if("coordinatesSearch"===n)return pe.coordinateFormatChange(N,ue,q,n);if("bookmarkSearch"===n)return t}return null};return p().createElement(M,null,p().createElement(_.FormGroup,null,p().createElement("div",{className:"input-group",style:{display:"flex"}},j&&j.map((function(e,t){return p().createElement("span",{key:"selected-item"+t,className:"input-group-addon"},p().createElement("div",{className:"selectedItem-text"},e.text))})),p().createElement(B,{show:"addressSearch"===n,delay:v,typeAhead:O,blurResetDelay:g,placeholder:V,placeholderMsgId:L,searchText:d,selectedItems:j,onSearch:je,onSearchTextChange:J,onCancelSelectedItem:ee,onPurgeResults:Ee}),"coordinatesSearch"===n&&Y&&p().createElement(ye,{format:N,defaultZoomLevel:R,onClearCoordinatesSearch:se}),"bookmarkSearch"===n&&W&&p().createElement(ce,{mapInitial:Pe.mapInitial}),p().createElement(X,{splitTools:!1,toolbarButtons:[].concat(he(Fe()?[ge({},Fe())]:[]),he(we.filter((function(e){return"button"===e.target})).map((function(e){var t=e.component;return{visible:!!q,Element:t}}))),[ge({glyph:i,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!I()(b)&&b,visible:"addressSearch"===n&&(""!==d||j&&j.length>0),onClick:function(){"addressSearch"===n&&Ie()}},"coordinatesSearch"===n&&pe.removeIcon(n,E,se,re)),ge(ge({glyph:c,className:"square-button-md no-border "+(l||"addressSearch"!==n?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipPosition:"bottom",visible:!("addressSearch"!==n||(""!==d||j&&j.length>0)&&u),onClick:function(){return l&&je()}},"coordinatesSearch"===n&&pe.searchIcon(n,E,ve,R)),"bookmarkSearch"===n&&ie.searchIcon(n,Pe)),{tooltip:(Ne=D,Ne?p().createElement(C.Z,{msgId:Ne.msgId||"search.generic_error",msgParams:{message:Ne.message,serviceType:Ne.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!D,onClick:Ie},{visible:q,renderButton:p().createElement(F,{disabled:q,menuItems:Ce})}])}))))})),Yt=(0,h.P1)([Ot.Od,et.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),zt=(0,d.connect)(Yt,{onItemClick:S.Jc,addMarker:S._q,showGFI:S.w4})(Ue),Wt=(0,d.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:S.o$})((At=Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(l,e);var t,r,n,i,c=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qt(n);if(i){var r=qt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Zt(this,e)});function l(){var e;Vt(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ut(Bt(e=c.call.apply(c,[this].concat(r))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&o()(e.props.selectedItems[e.props.selectedItems.length-1],t)})),Ut(Bt(e),"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?s()({},r,{services:n.services}):s()({},r,{services:r.services.concat(n.services)}):r})),Ut(Bt(e),"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?s()({},r,{services:t}):r})),Ut(Bt(e),"getSearchAndToggleButton",(function(){var t=p().createElement(Ht,Mt({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return!0===e.props.withToggle?[p().createElement(kt,null)].concat(e.props.enabled?[t]:null):a()(e.props.withToggle)?p().createElement("span",null,p().createElement(m(),{query:"("+e.props.withToggle[0]+")"},p().createElement(kt,null),e.props.enabled?t:null),p().createElement(m(),{query:"("+e.props.withToggle[1]+")"},t)):t})),e}return t=l,(r=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(Ft(Ft({},Ne.be),this.props.resultsStyle))}},{key:"render",value:function(){return p().createElement("span",null,this.getSearchAndToggleButton(),p().createElement(zt,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&Gt(t.prototype,r),l}(p().Component),Ut(Dt,"propTypes",{splitTools:u().bool,showOptions:u().bool,isSearchClickable:u().bool,fitResultsToMapSize:u().bool,searchOptions:u().object,resultsStyle:u().object,selectedItems:u().array,selectedServices:u().array,userServices:u().array,withToggle:u().oneOfType([u().bool,u().array]),enabled:u().bool,textSearchConfig:u().object}),Ut(Dt,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),At));const Xt={SearchPlugin:s()(Wt,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:function(e){return e.ofType(S.bj).debounceTime(250).switchMap((function(t){return Ke.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var r=ot.b.Utils.getService(e.type);if(!r){var n=new Error("Service Missing");return n.msgId="search.service_missing",n.serviceType=e.type,Ke.Observable.of(n).do((function(e){throw e}))}return Ke.Observable.defer((function(){return r(t.searchText,e.options).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return ft(ft({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return $e()([].concat(st(e),st(t)),["__PRIORITY__"])})).map((function(e){return(0,S.WN)(e.slice(0,t.maxResults||15),!1)})).startWith((0,S.yo)(!0)).takeUntil(e.ofType(S.Av,S.M8,S.dX)).concat([(0,S.yo)(!1)]).catch((function(e){var t=ft(ft({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return Ke.Observable.from([(0,S.kE)(t),(0,S.yo)(!1)])}))}))},searchOnStartEpic:function(e,t){return e.ofType(S.Vc).switchMap((function(e){var r=e.layer,n=e.cql_filter,o=t.getState();if(0===(0,et.OX)(o).filter((function(e){return e.name===r})).length)return Ke.Observable.of((0,S.Tw)());var i=(0,et.dT)(o,r);return i&&n?Ke.Observable.defer((function(){return(0,it.DH)(i.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:n}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&ft(ft({},e.features[0]),{},{typeName:r})}))})).switchMap((function(e){var t=e.type,r=e.geometry,o=e.typeName,i=We()({type:t,geometry:r}).geometry.coordinates,a={lng:i[0],lat:i[1]};return i?Ke.Observable.of((0,tt.lK)({latlng:a},o,[o],pt({},o,{cql_filter:n})),(0,tt.HP)()):Ke.Observable.empty()})).catch((function(){return Ke.Observable.of((0,S.I3)())})):Ke.Observable.empty()}))},searchItemSelected:function(e,t){return e.ofType(S.dX).switchMap((function(e){var r=Ke.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=(0,_e.generateTemplateString)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return Ke.Observable.fromPromise(ot.b.Utils.getService(t.__SERVICE__.geomService.type)("",s()({},t.__SERVICE__.geomService.options,{staticFilter:r})).then((function(e){return s()({},t,{geometry:nt.default.mergeToPolyGeom(e)})})))}return Ke.Observable.of(e.item)})).concatMap((function(e){var r=e.bbox||e.properties.bbox||Ye()(e),n=[(0,O.Px)([r[0],r[1],r[2],r[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),(0,S._q)(e)];if(e.__SERVICE__&&!Je()(e.__SERVICE__.launchInfoPanel)&&e.__SERVICE__.options&&e.__SERVICE__.options.typeName){var o=We()(e).geometry.coordinates,i={lng:o[0],lat:o[1]},a=e.__SERVICE__.options.typeName;if(o){var c=t.getState(),s=a&&(0,et.dT)(c,a),l=null,u=[],f={},p=!1;return"single_layer"===e.__SERVICE__.launchInfoPanel&&(p=e.__SERVICE__.forceSearchLayerVisibility,u=[a],l=e.id,f=pt({},e.__SERVICE__.options.typeName,{info_format:dt(s,c),featureid:l})),[].concat(st(p&&s?[(0,rt.He)(s.id,{visibility:!0})]:[]),st(e.__SERVICE__.openFeatureInfoButtonEnabled?[]:[(0,tt.lK)({latlng:i},a,u,f,l)]),[(0,tt.HP)()],n)}}return n})),n=e.item,o=n&&n.__SERVICE__&&n.__SERVICE__.then,i=o?Ke.Observable.of((0,S.QJ)(o.map((function(e){return ft(ft({},e),{},{options:ft({item:n},e.options)})})),{text:(0,_e.generateTemplateString)(n.__SERVICE__.displayName||"")(n),placeholder:n.__SERVICE__.nestedPlaceholder&&(0,_e.generateTemplateString)(n.__SERVICE__.nestedPlaceholder||"")(n),placeholderMsgId:n.__SERVICE__.nestedPlaceholderMsgId&&(0,_e.generateTemplateString)(n.__SERVICE__.nestedPlaceholderMsgId||"")(n)},(0,_e.generateTemplateString)(n.__SERVICE__.searchTextTemplate||"")(n))):Ke.Observable.empty(),a=n.__SERVICE__&&n.__SERVICE__.searchTextTemplate,c=a?Ke.Observable.of((0,S.k9)((0,_e.generateTemplateString)(a)(n))):Ke.Observable.empty();return Ke.Observable.of((0,S.kV)()).concat(r,i,c)}))},zoomAndAddPointEpic:function(e,t){return e.ofType(S.b4).switchMap((function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},n=t.getState();return Ke.Observable.from([(0,b.W)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:n.search&&n.search.style||Ne.be}),(0,O.xy)(e.pos,e.zoom,e.crs)])}))},textSearchShowGFIEpic:function(e,t){return e.ofType(S.al).switchMap((function(e){var r,n,o,i,a,c,s=e.item,l=t.getState(),u=null==s||null===(r=s.__SERVICE__)||void 0===r||null===(n=r.options)||void 0===n?void 0:n.typeName,f=u&&(0,et.dT)(l,u),p=s.bbox||s.properties.bbox||Ye()(s),d=We()(s).geometry.coordinates,y={lng:d[0],lat:d[1]},m=s.id;return d&&(0,Ne.zA)(null==s?void 0:s.__SERVICE__)&&(0,Ne.Tv)(f,null==s?void 0:s.__SERVICE__)?(o=Ke.Observable).of.apply(o,st(null!=s&&null!==(i=s.__SERVICE__)&&void 0!==i&&i.forceSearchLayerVisibility&&f?[(0,rt.He)(f.id,{visibility:!0})]:[]).concat([(0,tt.lK)({latlng:y},u,[u],pt({},u,{info_format:dt(f,l),featureid:m}),m),(0,tt.HP)(),(0,O.Px)([p[0],p[1],p[2],p[3]],"EPSG:4326",(null==s||null===(a=s.__SERVICE__)||void 0===a||null===(c=a.options)||void 0===c?void 0:c.maxZoomLevel)||21),(0,S._q)(s)])):Ke.Observable.empty()}))}},reducers:{search:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case S.NN:return s()({},t,{loading:r.loading});case S.O7:return s()({},t,{error:r.error});case S.gs:return s()({},t,{searchText:r.searchText,error:null});case S.p7:var n=r.results;return!0===r.append&&t&&t.results&&(n=[].concat(vt(t.results),vt(r.results))),s()({},t,{results:n,error:null});case S.Av:return s()({},t,{results:null,error:null});case S.wn:var o=r.markerPosition.latlng?{latlng:r.markerPosition.latlng,lat:r.markerPosition.latlng.lat,lng:r.markerPosition.latlng.lng}:r.markerPosition;return s()({},t,{markerPosition:o,markerLabel:r.markerLabel});case S.Gh:return s()({},t,{highlightedFeature:r.highlightedFeature});case S.M8:return{style:t.style||{}};case g.l:return null;case S.C2:return s()({},t,{selectedServices:r.services,searchText:r.searchText,selectedItems:(t.selectedItems||[]).concat(r.items)});case S.oQ:return t?s()({},{selectedItems:t.selectedItems&&t.selectedItems.filter((function(e){return e!==r.item})),searchText:""===t.searchText&&r.item&&r.item.text?r.item.text.substring(0,r.item.text.length):t.searchText}):t;case S.x2:return s()({},t,{style:r.style});case S.Y7:return ht(ht({},t),{},{activeSearchTool:r.activeSearchTool});case S.GI:return ht(ht({},t),{},{format:r.format});case S.KP:return ht(ht({},t),{},{coordinate:ht(ht({},t.coordinate),{},bt({},r.coord,r.val))});case S.dS:return s()({},t,{markerPosition:null!=t&&null!==(e=t.markerPosition)&&void 0!==e&&e.latlng?{}:null==t?void 0:t.markerPosition});default:return t}},mapInfo:yt.Z}}}}]);