(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[441],{53001:(e,t,n)=>{"use strict";n.d(t,{xT:()=>r,H_:()=>o,Wv:()=>c,gC:()=>a,dG:()=>i,oQ:()=>u,Q2:()=>s,R3:()=>l,Zr:()=>p,Op:()=>f,l$:()=>d,uL:()=>A,zg:()=>m,M3:()=>E,st:()=>g,US:()=>O,$c:()=>R,pW:()=>C,$D:()=>T,ke:()=>v,vw:()=>y,r5:()=>w,X1:()=>G,V3:()=>L,p2:()=>S});var r="BACKGROUND_SELECTOR:ADD_BACKGROUND",o="BACKGROUND_SELECTOR:REMOVE_BACKGROUND",c="BACKGROUND_SELECTOR:SET_CURRENT_BACKGROUND_LAYER",a="BACKGROUND_SELECTOR:BACKGROUND_ADDED",i="BACKGROUND_SELECTOR:BACKGROUND_EDITED",u="BACKGROUND_SELECTOR:ADD_BACKGROUND_PROPERTIES",s="BACKGROUND_SELECTOR:SET_BACKGROUND_MODAL_PARAMS",l="BACKGROUND_SELECTOR:UPDATE_BACKGROUND_THUMBNAIL",p="BACKGROUND_SELECTOR:BACKGROUNDS_CLEAR",f="BACKGROUND_SELECTOR:CREATE_BACKGROUNDS_LIST",d="BACKGROUND_SELECTOR:CLEAR_MODAL_PARAMETERS",A="BACKGROUND_SELECTOR:CONFIRM_DELETE_BACKGROUND_MODAL",m="BACKGROUND_SELECTOR:ALLOW_BACKGROUNDS_DELETION";function E(e){return{type:f,backgrounds:e}}function g(e){return{type:r,source:e}}function O(e){return{type:u,modalParams:e}}function R(e){return{type:s,modalParams:e}}function C(e){return{type:a,layerId:e}}function T(e){return{type:i,layerId:e}}function v(e){return{type:c,layerId:e}}function y(e){return{type:m,allow:e}}function w(e,t){return{type:l,thumbnailData:e,id:t}}function G(e){return{type:o,backgroundId:e}}function L(){return{type:d}}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:A,show:e,layerTitle:t,layerId:n}}},31273:(e,t,n)=>{"use strict";n.d(t,{WX:()=>C,V3:()=>T,HR:()=>v,xi:()=>y,ur:()=>w,vK:()=>G,nm:()=>L,QF:()=>S,zZ:()=>h,uN:()=>_,Bz:()=>D,im:()=>P,CO:()=>N,$X:()=>x,Mt:()=>b,Oq:()=>I,YO:()=>U,PR:()=>B,wI:()=>M,bv:()=>K,mh:()=>k,$Y:()=>F,eA:()=>H,UT:()=>V,cS:()=>q,l3:()=>j,Kz:()=>W,vg:()=>X,xM:()=>Z,do:()=>Q,lb:()=>Y,tt:()=>$,nX:()=>z,BG:()=>J,Rc:()=>ee,K4:()=>te,Dw:()=>ne,dL:()=>re,In:()=>oe,r1:()=>ce,XW:()=>ae,L8:()=>ie,i3:()=>ue,XM:()=>se,X7:()=>le,M3:()=>pe,N3:()=>fe,SU:()=>de,wo:()=>Ae,ye:()=>me,m:()=>Ee,wl:()=>ge,A4:()=>Re,vG:()=>Ce,ky:()=>Te,Wf:()=>ve,Ts:()=>ye,IT:()=>we,XS:()=>Ge,tx:()=>Le,We:()=>Se,nx:()=>he,E9:()=>_e});var r=n(59551),o=n(67007),c=n(3475),a=n(32354),i=n(80416),u=n(1550),s=n(24262),l=n(63202),p=n(13311),f=n.n(p),d=n(88113),A=n(75110),m=n(97395);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R={csw:r.Z,wms:o.ZP,wmts:c.Z,backgrounds:a.Z},C="CATALOG:ADD_LAYERS_FROM_CATALOGS",T="CATALOG:TEXT_SEARCH",v="CATALOG:RECORD_LIST_LOADED",y="CATALOG:RESET_CATALOG",w="CATALOG:CATALOG_CLOSE",G="CATALOG:RECORD_LIST_LOAD_ERROR",L="CATALOG:CHANGE_CATALOG_FORMAT",S="CATALOG:ADD_LAYER_ERROR",h="CATALOG:CHANGE_SELECTED_SERVICE",_="CATALOG:CHANGE_CATALOG_MODE",D="CATALOG:CHANGE_METADATA_TEMPLATE",P="CATALOG:CHANGE_TITLE",N="CATALOG:CHANGE_TEXT",x="CATALOG:CHANGE_TYPE",b="CATALOG:CHANGE_SERVICE_PROPERTY",I="CATALOG:CHANGE_SERVICE_FORMAT",U="CATALOG:FOCUS_SERVICES_LIST",B="CATALOG:CHANGE_URL",M="CATALOG:ADD_CATALOG_SERVICE",K="CATALOG:DELETE_CATALOG_SERVICE",k="CATALOG:ADD_SERVICE",F="CATALOG:DELETE_SERVICE",H="CATALOG:SAVING_SERVICE",V="CATALOG:GET_METADATA_RECORD_BY_ID",q="CATALOG:SET_LOADING",j="CATALOG:TOGGLE_TEMPLATE",W="CATALOG:TOGGLE_THUMBNAIL",X="CATALOG:TOGGLE_ADVANCED_SETTINGS",Z="CATALOG:FORMAT_OPTIONS_FETCH",Q="CATALOG:FORMAT_OPTIONS_LOADING",Y="CATALOG:SET_FORMAT_OPTIONS";function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=e.url,r=e.startPosition,o=e.maxRecords,c=e.text,a=e.options,i=void 0===a?{}:a;return{type:T,format:t,url:n,startPosition:r,maxRecords:o,text:c,options:i}}function z(e,t){return{type:v,searchOptions:e,result:t}}function J(e){return{type:L,format:e}}function ee(e){return{type:H,status:e}}function te(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:q,loading:e}}function ne(e){return{type:h,service:e}}function re(e){return{type:U,status:e}}function oe(e,t){return{type:_,mode:e,isNew:t}}function ce(e){return{type:P,title:e}}function ae(e){return{type:N,text:e}}function ie(e,t){return{type:b,property:e,value:t}}function ue(e){return{type:I,format:e}}function se(e){return{type:x,newType:e}}function le(e){return{type:B,url:e}}function pe(){return{type:k}}function fe(e){return{type:M,service:e}}function de(e){return{type:K,service:e}}function Ae(){return{type:F}}function me(){return{type:y}}function Ee(e){return{type:G,error:e}}function ge(){return{type:w}}function Oe(e,t){return{type:"CATALOG:DESCRIBE_ERROR",layer:e,error:t}}var Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.zoomToLayer,r=void 0!==n&&n;return function(t,n){var o=n(),c=(0,A.l2)(o),a=(0,s.R8)(e,c||[]);return t((0,i.A4)(g(g({},e),{},{id:a}))),r&&e.bbox&&t((0,u.Px)(e.bbox.bounds,e.bbox.crs)),"wms"===e.type?R.wms.describeLayers((0,s.Hi)(e),e.name).then((function(n){if(n){var r=f()(n,(function(t){return t.name===e.name}));if(r&&"WFS"===r.owsType){var c=l.jQ(l.$F(r.owsURL),(0,d.kS)(o));t((0,i.He)(a,{search:{url:c,type:"wfs"}}))}}})).catch((function(n){return t(Oe(e,n))})):null}};function Ce(e){return{type:S,error:e}}function Te(e){return{type:V,metadataOptions:e}}var ve=function(e){return{type:D,metadataTemplate:e}},ye=function(){return{type:X}},we=function(){return{type:j}},Ge=function(){return{type:W}},Le=function(e){return{type:Z,url:e}},Se=function(e){return{type:Q,loading:e}},he=function(e,t){return{type:Y,formats:e,url:t}};function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,m.vU)({title:"catalog.notification.errorTitle",message:"catalog.notification.errorSearchingRecords",values:{records:e}})}},59551:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(72500),o=n.n(r),c=n(91175),a=n.n(c),i=n(10928),u=n.n(i),s=n(27418),l=n.n(s),p=n(75875),f=n.n(p),d=n(63202),A=n(86267),m=function(e){var t=o().parse(e,!0);return o().format(l()({},t,{search:null},{query:l()({service:"CSW",version:"2.0.2"},t.query,{request:void 0})}))},E={parseUrl:m,getRecordById:function(e){return new Promise((function(t){Promise.all([n.e(9942),n.e(6372)]).then(function(){t(f().get(e).then((function(e){if(e){var t=n(66372).unmarshaller.unmarshalString(e.data);if(t&&t.name&&"GetRecordByIdResponse"===t.name.localPart&&t.value&&t.value.abstractRecord){var r=t.value.abstractRecord[0].value.dcElement;if(r){for(var o={references:[]},c=0;c<r.length;c++){var a=r[c],i=a.name.localPart,u={};u="references"===i&&a.value?{value:a.value.content&&(0,d.$F)(a.value.content[0])||a.value.content||a.value,scheme:a.value.scheme}:a.value.content&&a.value.content[0]||a.value.content||a.value,o[i]&&Array.isArray(o[i])?o[i].push(u):o[i]?o[i]=[o[i],u]:o[i]=u}return{dc:o}}}else if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"};return null}return null})))}.bind(null,n)).catch(n.oe)}))},getRecords:function(e,t,r,o){return new Promise((function(c){Promise.all([n.e(9942),n.e(1269)]).then(function(){var i=n(66372),s=i.CSW,l=i.marshaller,p=i.unmarshaller,E=l.marshalString({name:"csw:GetRecords",value:s.getRecords(t,r,"string"!=typeof o&&o)});o&&"string"!=typeof o||(E=function(e,t,n){return n?'<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"\n    xmlns:ogc="http://www.opengis.net/ogc"\n    xmlns:gml="http://www.opengis.net/gml"\n    xmlns:dc="http://purl.org/dc/elements/1.1/"\n    xmlns:dct="http://purl.org/dc/terms/"\n    xmlns:gmd="http://www.isotc211.org/2005/gmd"\n    xmlns:gco="http://www.isotc211.org/2005/gco"\n    xmlns:gmi="http://www.isotc211.org/2005/gmi"\n    xmlns:ows="http://www.opengis.net/ows" service="CSW" version="2.0.2" resultType="results" startPosition="'.concat(e,'" maxRecords="').concat(t,'">\n    <csw:Query typeNames="csw:Record">\n        <csw:ElementSetName>full</csw:ElementSetName>\n        <csw:Constraint version="1.1.0">\n            <ogc:Filter>\n            <ogc:And>\n                <ogc:PropertyIsLike wildCard="%" singleChar="_" escapeChar="\\">\n                    <ogc:PropertyName>csw:AnyText</ogc:PropertyName>\n                    <ogc:Literal>%').concat(n,"%</ogc:Literal>\n                </ogc:PropertyIsLike>\n                <ogc:Or>\n                <ogc:PropertyIsEqualTo>\n                    <ogc:PropertyName>dc:type</ogc:PropertyName>\n                    <ogc:Literal>dataset</ogc:Literal>\n                </ogc:PropertyIsEqualTo>\n                <ogc:PropertyIsEqualTo>\n                    <ogc:PropertyName>dc:type</ogc:PropertyName>\n                    <ogc:Literal>http://purl.org/dc/dcmitype/Dataset</ogc:Literal>\n                </ogc:PropertyIsEqualTo>\n               </ogc:Or>\n            </ogc:And>\n            </ogc:Filter>\n        </csw:Constraint>\n    </csw:Query>\n</csw:GetRecords>"):'<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"\n        xmlns:ogc="http://www.opengis.net/ogc"\n        xmlns:gml="http://www.opengis.net/gml"\n        xmlns:dc="http://purl.org/dc/elements/1.1/"\n        xmlns:dct="http://purl.org/dc/terms/"\n        xmlns:gmd="http://www.isotc211.org/2005/gmd"\n        xmlns:gco="http://www.isotc211.org/2005/gco"\n        xmlns:gmi="http://www.isotc211.org/2005/gmi"\n        xmlns:ows="http://www.opengis.net/ows" service="CSW" version="2.0.2" resultType="results" startPosition="'.concat(e,'" maxRecords="').concat(t,'">\n        <csw:Query typeNames="csw:Record">\n            <csw:ElementSetName>full</csw:ElementSetName>\n            <csw:Constraint version="1.1.0">\n        <ogc:Filter>\n            <ogc:Or>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>http://purl.org/dc/dcmitype/Dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n           </ogc:Or>\n        </ogc:Filter>\n            </csw:Constraint>\n        </csw:Query>\n    </csw:GetRecords>')}(t,r,o)),c(f().post(m(e),E,{headers:{"Content-Type":"application/xml"}}).then((function(e){if(e){var t=p.unmarshalString(e.data);if(t&&t.name&&"GetRecordsResponse"===t.name.localPart&&t.value&&t.value.searchResults){var n=t.value,r=n.searchResults.abstractRecord||n.searchResults.any,o={numberOfRecordsMatched:n.searchResults.numberOfRecordsMatched,numberOfRecordsReturned:n.searchResults.numberOfRecordsReturned,nextRecord:n.searchResults.nextRecord},c=[];if(r)for(var i=0;i<r.length;i++){var s=r[i].value,l={dateStamp:s.dateStamp&&s.dateStamp.date,fileIdentifier:s.fileIdentifier&&s.fileIdentifier.characterString&&s.fileIdentifier.characterString.value,identificationInfo:s.abstractMDIdentification&&s.abstractMDIdentification.value};if(s.boundingBox){var f,m=void 0;if((f=Array.isArray(s.boundingBox)?a()(s.boundingBox):s.boundingBox)&&f.value){var E,g,O,R,C=null!==(E=null===(g=f.value)||void 0===g?void 0:g.crs)&&void 0!==E?E:"",T=null===(O=C.match(/[\w-]*:[\w-]*:[\w-]*:[\w-]*:[\w-]*:[^:]*:(([\w-]+\s[\w-]+)|[\w-]*)/))||void 0===O?void 0:O[0],v=(0,A.makeNumericEPSG)(null===(R=C.match(/EPSG:[0-9]+/))||void 0===R?void 0:R[0]),y=f.value.lowerCorner,w=f.value.upperCorner,G=v||(0,A.extractCrsFromURN)(T)||u()(C.split(":"));"EPSG:4326"===(G?"EPSG:"===G.slice(0,5)?(0,A.makeNumericEPSG)(G):(0,A.makeNumericEPSG)("EPSG:".concat(G)):"EPSG:4326")&&"CRS84"!==G&&"OGC:CRS84"!==G&&(y=[y[1],y[0]],w=[w[1],w[0]]),m=(0,A.makeBboxFromOWS)(y,w)}l.boundingBox={extent:m,crs:"EPSG:4326"}}var L=s.dcElement;if(L){for(var S={references:[]},h=0;h<L.length;h++){var _=L[h],D=_.name.localPart,P={};P="references"===D&&_.value?{value:_.value.content&&(0,d.$F)(_.value.content[0])||_.value.content||_.value,scheme:_.value.scheme}:_.value.content&&_.value.content[0]||_.value.content||_.value,S[D]&&Array.isArray(S[D])?S[D].push(P):S[D]?S[D]=[S[D],P]:S[D]=P}l.dc=S}c.push(l)}return o.records=c,o}if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"}}return null})))}.bind(null,n)).catch(n.oe)}))},textSearch:function(e,t,n,r){return new Promise((function(o){o(E.getRecords(e,t,n,r))}))},workspaceSearch:function(e,t,r,o,c){return new Promise((function(a){Promise.all([n.e(9942),n.e(1269)]).then(function(){var i=n(84454).Filter,u=c||"%",s=o&&"%"+o+"%"||"%",l=i.propertyIsLike("dc:identifier",u+":"+s),p=i.filter(l);a(E.getRecords(e,t,r,p))}.bind(null,n)).catch(n.oe)}))},reset:function(){}};const g=E},3475:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(75875),o=n.n(r),c=n(63202),a=n(72500),i=n.n(a),u=n(27418),s=n.n(u),l=n(5055),p=n.n(l),f=n(84596),d=n.n(f),A=n(86267),m=n(7294),E={},g=function(e){var t=i().parse(e,!0);return i().format(s()({},t,{search:null},{query:s()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},O=function(e,t,n,r,o){for(var c=e.Capabilities.Contents,a=(0,m.G6)(e),i=(0,m.s5)(e),u=c.TileMatrixSet&&d()(c.TileMatrixSet)||[],l=[],p=u.length,f=0;f<p;f++)l.push((0,A.getEPSGCode)(u[f]["ows:SupportedCRS"]));var E=c.Layer,g=d()(E).filter((function(e){return!r||-1!==e["ows:Identifier"].toLowerCase().indexOf(r.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(r.toLowerCase())}));return{numberOfRecordsMatched:g.length,numberOfRecordsReturned:Math.min(n,g.length),nextRecord:t+Math.min(n,g.length)+1,records:g.filter((function(e,r){return r>=t-1&&r<t-1+n})).map((function(e){return s()({},e,{SRS:l,TileMatrixSet:u,queryable:!!(0,m.b4)(a,"GetFeatureInfo","KVP"),requestEncoding:i,style:(0,m.EN)(e),format:(0,m.JY)(e),GetTileURL:(0,m.b4)(a,"GetTile",i),capabilitiesURL:o})}))}},R={parseUrl:g,getRecords:function(e,t,n,r){var a=E[e];return a&&(new Date).getTime()<a.timestamp+1e3*((0,c.u8)("cacheExpire")||60)?new Promise((function(o){o(O(a.data,t,n,r,e))})):o().get(g(e)).then((function(o){var c;return p().parseString(o.data,{explicitArray:!1},(function(e,t){c=t})),E[e]={timestamp:(new Date).getTime(),data:c},O(c,t,n,r,e)}))},getCapabilities:function(e){var t=E[e];return t&&(new Date).getTime()<t.timestamp+1e3*((0,c.u8)("cacheExpire")||60)?new Promise((function(e){e(t.data)})):o().get(g(e)).then((function(t){var n;return p().parseString(t.data,{explicitArray:!1},(function(e,t){n=t})),E[e]={timestamp:(new Date).getTime(),data:n},n}))},textSearch:function(e,t,n,r){return R.getRecords(e,t,n,r)},reset:function(){Object.keys(E).forEach((function(e){delete E[e]}))}};const C=R},32354:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(27361),o=n.n(r),c=n(63202),a=function(e,t,n,r){var a=o()(c.ZP.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter((function(e){return!r||e.title.indexOf(r)>-1})),i=a.filter((function(e,r){return r>=t-1&&r<n+t-1}));return new Promise((function(e){return e({numberOfRecordsMatched:a.length,numberOfRecordsReturned:i.length,records:i,service:{Name:"Background Provider"}})}))};const i={getRecords:a,reset:function(){},textSearch:function(e,t,n,r){return a(0,t,n,r)}}}}]);