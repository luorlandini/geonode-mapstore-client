(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[7755],{7691:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>E});var n=t(89255),o=t(57579),a=t(55927),i=t(82904),s=t(95797),c=t(97395),u=t(7878),l=t(63516),d=t(67306),v=t(74621),f=t(1757),b=t(24684),g=t(91312),p=t(89919),y=t(75982),h=["data"],O=["status","statusText","data","message"];function m(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function w(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return S(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach((function(r){D(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function D(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var k=function(e){var r=(0,f.JT)(e);return[r.search&&r.search.url,r.name]};const E={openDashboardWidgetEditor:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,i=void 0===t?function(){}:t;return e.ofType(o.AE,o.dm).filter((function(){return(0,d.Wy)(i())})).switchMap((function(){return n.Observable.of((0,a.D_)(!0))}))},closeDashboardWidgetEditorOnFinish:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,i=void 0===t?function(){}:t;return e.ofType(o.Jm).filter((function(){return(0,d.Wy)(i())})).switchMap((function(){return n.Observable.of((0,a.D_)(!1))}))},initDashboardEditorOnNew:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,a=void 0===t?function(){}:t;return e.ofType(o.AE).filter((function(){return(0,d.Wy)(a())})).switchMap((function(e){return n.Observable.of((0,o.bS)(P(P({legend:!1,mapSync:!1,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},closeDashboardEditorOnExit:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,o=void 0===t?function(){}:t;return e.ofType(y.nk).filter((function(){return(0,d.Wy)(o())})).filter((function(){return(0,d.i$)(o())})).switchMap((function(){return n.Observable.of((0,a.D_)(!1))}))},handleDashboardWidgetsFilterPanel:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.getState,a=void 0===t?function(){}:t;return e.ofType(o.lG).filter((function(){return(0,d.Wy)(a())})).switchMap((function(){return n.Observable.of(s.gT.apply(void 0,w(k(a()))),(0,u.F)((0,f.um)(a())),(0,i.Xg)("queryPanel","enabled",!0)).concat(n.Observable.race(e.ofType(u.Wm).take(1),e.ofType(i.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"queryPanel"===r&&(!t||"enabled"===t)})).take(1)).switchMap((function(e){return(e.filterObj?n.Observable.of((0,o.Rz)("filter",e.filterObj)):n.Observable.empty()).merge(n.Observable.of((0,i.Xg)("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(y.nk,o.dm).merge(e.ofType(i.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"widgetBuilder"===r&&0==!t})))).concat(n.Observable.of((0,i.Xg)("queryPanel","enabled",!1)))}))},filterAnonymousUsersForDashboard:function(e,r){return e.ofType(l.c8,l.Nv).filter((function(){return"/dashboard"===(0,b.F)(r.getState())})).switchMap((function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),(0,v.jl)(r.getState())?n.Observable.empty():n.Observable.of((0,a.AN)({status:403}))}))},loadDashboardStream:function(e,r){var t=r.getState,o=void 0===t?function(){}:t;return e.ofType(a.zX).switchMap((function(e){var r=e.id;return(0,g.RX)(r).map((function(e){var r=e.data,t=m(e,h);return(0,a.rR)(t,r)})).let((0,p.hP)((0,a.vM)(!0,"loading"),(0,a.vM)(!1,"loading"),(function(e){var r=window.location.href.match("dashboard-embedded")?"dashboardEmbedded":"dashboard",t=r+".errors.loading.unknownError";return 403===e.status&&(t=r+".errors.loading.pleaseLogin",(0,v.jl)(o())&&(t=r+".errors.loading.dashboardNotAccessible")),404===e.status&&(t=r+".errors.loading.dashboardDoesNotExist"),n.Observable.of((0,c.vU)({title:r+".errors.loading.title",message:t}),(0,a.AN)(P(P({},e),{},{messageId:t})))})))}))},reloadDashboardOnLoginLogout:function(e){return e.ofType(a.zX).switchMap((function(r){var t=r.id;return e.ofType(l.XP,l.Nv).switchMap((function(){return n.Observable.of((0,a.o2)(t)).delay(1e3)})).takeUntil(e.ofType(y.nk))}))},saveDashboard:function(e){return e.ofType(a.aR).exhaustMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.resource;return(r.id?(0,g.id)(r):(0,g.SN)(r)).switchMap((function(e){return n.Observable.of((0,a.sA)(e),r.id?(0,a.gE)(!1):(0,a.pB)(!1),r.id?(0,a.o2)(e):(0,y.VF)("/dashboard/".concat(e))).merge(n.Observable.of((0,c.$Z)({id:"DASHBOARD_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(r.id?0:1e3))})).let((0,p.hP)((0,a.vM)(!0,"saving"),(0,a.vM)(!1,"saving"))).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.status,t=e.statusText,o=e.data,i=e.message,s=m(e,O);return n.Observable.of((0,a.GD)(r?{status:r,statusText:t,data:o}:i||s),(0,a.vM)(!1,"saving"))}))}))}}},24412:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var n=t(55927),o=t(57579),a=t(61868),i=t(84596),s=t.n(i);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showConnections:!0,services:null,saveServiceLoading:!1},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.BJ:return(0,a.t8)("editor.available",r.available,e);case n._y:return(0,a.t8)("editing",r.editing,e);case o.wb:case o.Jm:case o.yY:return(0,a.t8)("editing",r.editing,e);case n.vk:return(0,a.t8)("showConnections",r.show,e);case n.uI:return(0,a.t8)("showSaveModal",r.show,(0,a.t8)("saveErrors",void 0,e));case n.mg:return(0,a.t8)("showSaveAsModal",r.show,(0,a.t8)("saveErrors",void 0,e));case n.E9:var t;return u(u({},e),{},{originalData:r.data,resource:r.resource,services:null===(t=r.data)||void 0===t?void 0:t.catalogs});case n.R4:return u(u({},e),{},{originalData:void 0,resource:void 0,mode:"view",services:void 0});case n.SW:return(0,a.t8)("saveErrors",s()(r.error),e);case n.$l:return(0,a.t8)("saveErrors",void 0,e);case n.E5:var i;return u(u({},e),{},{services:e.services||r.services,selectedService:(null===(i=r.service)||void 0===i?void 0:i.key)||""});case n.s6:return(0,a.t8)("services",r.services,e);case n.B_:return u(u({},e),{},{mode:r.mode,isNew:r.isNew,saveServiceLoading:!1});case n.TA:return u(u({},e),{},{saveServiceLoading:r.loading});case n.CF:var c=r.services,l=r.service;l.isNew=!1,l.showAdvancedSettings=!1,delete l.old,c[l.key]=l;var d=l.key;return u(u({},e),{},{services:c,selectedService:d,mode:"view"});case n.js:var v,f,b=r.services,g=r.service;(b[g.key]||b[null===(v=g.old)||void 0===v?void 0:v.key])&&(delete b[g.key]||b[null===(f=g.old)||void 0===f?void 0:f.key]);var p=Object.keys(b)[0]||"";return u(u({},e),{},{services:b,mode:"view",selectedService:p});case n.CP:return(0,a.t8)("loading"===r.name?"loading":"loadFlags.".concat(r.name),r.value,(0,a.t8)("loading",r.value,e));default:return e}}}}]);