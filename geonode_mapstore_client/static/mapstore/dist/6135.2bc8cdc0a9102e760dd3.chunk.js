(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6135],{24260:(e,t,r)=>{"use strict";r.d(t,{qj:()=>m,Bu:()=>h,UM:()=>O,X1:()=>j,L:()=>F,HY:()=>w,Mz:()=>P,F0:()=>q,dc:()=>x,b0:()=>S,hk:()=>I,Qs:()=>k,gy:()=>D,M7:()=>A,VD:()=>z});var n=r(14293),i=r.n(n),o=r(27361),u=r.n(o),a=r(91175),l=r.n(a),c=r(1469),f=r.n(c),d=r(30998),s=r.n(d);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){return u()(e,"query.filterObj.featureTypeName")},b=function(e){return function(t){return u()(t,'query.featureTypes["'.concat(e,'"]'))}},m=function(e,t){return u()(b(t)(e),"original")},h=function(e){return e&&e.query&&e.query.searchUrl},O=function(e){return e&&e.query&&e.query.url},j=function(e){return e&&e.query&&e.query.filterObj},F=function(e){return u()(b(y(e))(e),"attributes")},w=function(e){return u()(e,"query.typeName")},P=function(e){return u()(e,"query.result.features")},q=function(e){var t=u()(e,"query.result");return v(v({},t),{},{features:(t&&t.features||[]).filter((function(e){return!i()(e.geometry)}))})},x=function(e,t){var r=e&&e.query&&e.query.result&&e.query.result.features;return l()(r.filter((function(e){return e.id===t})))},S={startIndex:function(e){return u()(e,"query.filterObj.pagination.startIndex")},maxFeatures:function(e){return u()(e,"query.filterObj.pagination.maxFeatures")},resultSize:function(e){return u()(e,"query.result.features.length")},totalFeatures:function(e){return u()(e,"query.result.totalFeatures")}},I=function(e,t){var r=b(t)(e);return!!(r&&r.attributes&&r.geometry&&r.original)},k=function(e){return m(e,y(e))},D=function(e){return u()(e,"query.featureLoading")},A=function(e){return u()(e,"query.syncWmsFilter",!1)},z=function(e){var t=u()(e,"query.filterObj.crossLayerFilter"),r=u()(e,"query.filterObj.spatialField"),n=u()(e,"query.filterObj.filterFields");return!!(n&&l()(n)||r&&(r.method&&r.operation&&r.geometry||f()(r)&&s()(r,(function(e){return e.method&&e.operation&&e.geometry}))>-1)||t&&t.collectGeometries&&t.operation)}},96958:(e,t,r)=>{"use strict";r.d(t,{t3:()=>q,WQ:()=>S,dM:()=>I,rK:()=>k,Lo:()=>z,gP:()=>V,S9:()=>R,AV:()=>_,Sc:()=>C,a3:()=>G,IC:()=>N,wT:()=>L,cZ:()=>Q,ek:()=>U,Qc:()=>W,Cf:()=>H,dJ:()=>J,DR:()=>K,f1:()=>X});var n=r(6557),i=r.n(n),o=r(92742),u=r.n(o),a=r(19873),l=r.n(a),c=r(30998),f=r.n(c),d=r(27361),s=r.n(d),p=r(1469),v=r.n(p),g=r(14293),y=r.n(g),b=r(47037),m=r.n(b),h=r(78889);function O(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var q=function(e,t,r){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return f()(e,(function(e){return e<=r&&r<e+t}))}(t,r,e);return-1===n?n:n*r+e-t[n]},x={id:"empty_row",get:function(){}},S=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return t[q(e,r,n)]||w({},x)},I=function(e,t){return t[e]},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v()(e)?e.reduce((function(e,t){return w(w({},e),{},P({},t.id,w(w({},e[t.id]),t.updated)))}),{}):{}},D=function(e,t){var r=Object.keys(t).filter((function(e){return"geometry"!==e})).reduce((function(e,r){return w(w({},e),{},P({},r,t[r]))}),{}),n=Object.keys(t).filter((function(e){return"geometry"===e})).reduce((function(e,r){return w(w({},e),{},P({},r,t[r]))}),{});return w(w(w({},e),n),{},{properties:w(w({},e&&e.properties||{}),r)})},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=f()(e,t);return n>=0?e.map((function(e,t){return t===n?r:e})):[].concat(O(e),[r])},z=function(e){return((0,h.getFeatureTypeProperties)(e)||[]).filter((function(e){return!(0,h.isGeometryType)(e)}))},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return t.map((function(t){return r<=t&&t<=n?0:Math.abs(t-e)})).reduce((function(e,t,r,n){return t>n[e]&&r||e}),0)},E=function(e,t){return t.filter((function(t,r){return r!==e}))},T=function(e,t,r){return e.filter((function(e,n){return n<t||n>=t+r}))},V=function(e,t,r,n){for(var i,o,u=e;u<=t&&void 0===i;u++)-1===q(u*n,r,n)&&(i=u);for(var a=t;a>=e&&void 0===o;a--)-1===q(a*n,r,n)&&(o=a);return[i,o].filter((function(e){return void 0!==e}))},R=function(e,t,r){var n=e.startPage,i=e.endPage,o=V(n,i,t,r),u=o[1]-o[0]+1;return{startIndex:o[0]*r,maxFeatures:u*r}},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.editable,i=void 0!==n&&n,o=r.sortable,u=void 0===o||o,a=r.resizable,l=void 0===a||a,c=r.filterable,f=void 0===c||c,d=r.defaultSize,s=void 0===d?200:d,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},v=p.getEditor,g=void 0===v?function(){}:v,y=p.getFilterRenderer,b=void 0===y?function(){}:y,m=p.getFormatter,h=void 0===m?function(){}:m;return z(e).filter((function(e){return!(t[e.name]&&t[e.name].hide)})).map((function(e){return{sortable:u,key:e.name,width:t[e.name]&&t[e.name].width||s||void 0,name:t[e.name]&&t[e.name].label||e.name,resizable:l,editable:i,filterable:f,editor:g(e),formatter:h(e),filterRenderer:b(e,e.name)}}))},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o=(0,h.findGeometryProperty)(r);return e.map((function(e){return w(w({},e),{},{events:e.events&&Object.keys(e.events).reduce((function(i,o){return w(w({},i),{},P({},o,(function(i,u){return e.events[o](t(u.rowIdx),u,r,n)})))}),{})},"geometry"===e.key&&o?{filterRenderer:i(w(w({},o),{},{localType:"geometry"}),o.name),filterable:!0,geometryPropName:o.name}:{})}))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce((function(o,u){return w(w({},o),{},P({},u,(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e[u].apply(e,a.concat([t,r,n,i]))})))}),{})},N=function(e,t){return!!(0,h.getPropertyDesciptor)(e,t)},L=function(e,t,r){return(0,h.isValidValueForPropertyName)(e,(i=r,"geometry"===(n=t)?function(e){return s()((0,h.findGeometryProperty)(e),"name")}(i):n),r);var n,i},Q=function(){return"EPSG:4326"},U=function(e,t,r){return function(n){return t.length>0?n._new:!e||e&&!!r[n.id]}},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D(e,t[e.id]||{})},B=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/,H=function(e,t){if("string"===t)return{newVal:u()(e),operator:"ilike"};var r,n=B.exec(e),i="=";return n?("!=="===(i=n[1]||"=")|"!="===i?i="<>":"==="===i|"=="===i&&(i="="),r=parseFloat(n[2])):r=parseFloat(e,10),{newVal:r,operator:i}},J=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.attribute,n=t.operator,o=t.value,u=t.type,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(null===(e=a.groupFields)||void 0===e?void 0:e.filter((function(e){return r!==e.id&&1!==e.id})))||[];if(("string"===u||"number"===u)&&m()(o)&&-1!==(null==o?void 0:o.indexOf(","))){var c,f=(null==o?void 0:o.split(",").filter(i()))||[],d=(null===(c=a.filterFields)||void 0===c?void 0:c.filter((function(e){return r!==e.attribute})))||[];return w(w({},a),{},{groupFields:l.concat([{id:r,logic:"OR",groupId:1,index:0}]),filterFields:d.concat(f.map((function(e){var t=H(e,u),n=t.operator,i=t.newVal;return{attribute:r,rowId:Date.now(),type:u,groupId:r,operator:n,value:i}}))),spatialField:a.spatialField,spatialFieldOperator:a.spatialFieldOperator})}return w(w({},a),{},{groupFields:l.concat([{id:1,logic:"AND",groupId:1,index:0}]),filterFields:"geometry"===u?a.filterFields:y()(o)?(a.filterFields||[]).filter((function(e){return e.attribute!==r})):A(a.filterFields||[],{attribute:r},{attribute:r,rowId:Date.now(),type:u,groupId:1,operator:n,value:o}),spatialField:"geometry"===u?o:a.spatialField,spatialFieldOperator:v()(o)?"OR":""})},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,r=void 0===t?0:t,n=e.maxFeatures,i=void 0===n?1:n,o=e.totalFeatures,u=void 0===o?0:o,a=e.resultSize;return{page:Math.ceil(r/i),resultSize:a,size:i,total:u,maxPages:Math.ceil(u/i)-1}},X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.endPage,n=t.startPage,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.pages,u=i.features,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=a.size,f=a.maxStoredPages,d=a.startIndex,p=V(n,r,o,c),v=p[1]-p[0]+1,g=s()(e,"features",[]);g.length!==v*c&&(g=g.concat(l()(Array(v*c-g.length>0?v*c-g.length:g.length),!1)));var y=o,b=u,m=y.length+v-Math.max(f,r-n+1);if(m>0)for(var h=n*c,O=r*c,j=h+(O-h)/2,F=0;F<m;F++){var w=M(j,o,h,O),P=w*c;y=E(w,y),b=T(u,P,c)}for(var q=[],x=0;x<v;x++)q.push(d+c*x);return{pages:y.concat(q),features:b.concat(g)}}}}]);